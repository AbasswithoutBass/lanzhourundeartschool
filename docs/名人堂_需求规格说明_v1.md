# 润德名人堂后台管理系统（需求规格说明 v1）

> 目标：从“截图上传 → OCR 识别 → 数据纠错 → 选择发布 → 海报工厂”形成闭环，提升教学分析与品牌宣传效率。
> 说明：本文仅定义功能与流程，不涉及代码实现。

---

## 1. 总体目标与原则

- **OCR 必须完全准确**：来源为甘肃省教育考试院官网截图（版式固定），允许不同设备分辨率。
- **原图无水印上传**：系统展示时需自动对关键信息打码并添加“润德艺考”水印。
- **后台人工可编辑关键字段**：采用类似“教师管理”的表单模式，直接维护核心字段。
- **无平均分统计**：本系统不计算平均分/均值相关统计。
- **海报无水印**：海报存本地，仅提供生成与下载能力。
- **名人堂开关**：每个学生可独立设置是否加入名人堂、是否生成海报（1/2/3 张）。

---

## 2. OCR 识别与数据建模

### 2.1 识别字段（固定）

- 音乐表演 / 音乐教育（专业类别）
- 考生号
- 姓名
- 证件号
- 主项
- 乐理
- 听写
- 视唱
- 副项
- 专业总分
- 专业排名
- 主项排名（例如：美声唱法排名）
- 合格标记

### 2.2 OCR 识别策略

- OCR 仅用于自动填充初始数据，不提供独立纠错台。
- 关键字段的修改在“学生数据库”页面完成。

### 2.3 主副项逻辑与乐器分类

- 主项与副项逻辑由人工最终确认（OCR 仅作初始值）。
- 乐器类别与声乐细分（美声/民族/流行/原生态）需可人工选择。
- 西洋乐/民乐分类由OCR填写，人工可修改

---

## 3. 学生数据库（独立功能）

- 学生数据库是独立模块，**名人堂从该数据库同步**。
- 名称与字段以“学生数据库”为主，名人堂仅做展示与海报派生。

### 3.1 学生档案字段（建议结构）

- 基础信息：姓名、性别、证件号、考生号、原学校、生源地、届数/年份
- 联系方式：手机号、家长手机号
- 账号信息：艺考后台密码（明文，仅后台可见）
- 照片：学生照片（用于海报与名人堂展示）
- 专业信息：音乐表演/音乐教育，音乐教育下分主项/副项（含类别）音乐表演只包含主项，主项排名，专业排名
- 理论三项：视唱、练耳/听写、乐理
- 专业总分、合格标记
- OCR 截图来源信息（保留原图路径）
- 展示开关：是否加入名人堂
- 海报开关：生成 1/2/3 张，主项单张或主副项各一张或主副项各一张综合一张

### 3.2 管理流程（教师式后台）

- 上传截图 → OCR 自动填充 → 进入“学生数据库”列表/详情页
- 关键字段通过表单直接修改与保存（不设置独立纠错台）
- 保存后可选择：是否同步至名人堂、是否生成海报

---

## 4. 图片合规展示（脱敏 + 水印）

### 4.1 展示规范

- 系统内展示截图时：**对关键信息打码**，叠加“润德艺考”水印
- 原始无水印图仅后台可见、仅用于 OCR 与纠错

### 4.2 脱敏范围（待确认）

- 证件号：默认中间打码
- 考生号：建议打码后 4 位
- 姓名：可选隐藏部分（如只显示姓氏）

---

## 5. 海报工厂（主流程 + 精修页 + 前台轻量版）

### 5.0 页面与入口（细化）

- 入口 A：学生数据库 → 勾选学生 → 生成海报队列
- 入口 B：学生详情页 → 直接生成该学生海报（1/2/3 张）
- 队列页：展示待审海报卡片（9:16 预览图）

---

### 5.1 批量审核主流程（探探式）

- 批量生成后进入“审核队列”
- **右滑或 Enter**：判定为“合格”
- **左滑或 Backspace**：判定为“不合格”
- 支持进度条（已审/总数）与状态筛选
- 任意一张可跳转“单张精修页”

**审核结果含义**
- 合格：进入“可下载/可发布”集合
- 不合格：进入“待修”集合（必须精修后再导出）

---

### 5.2 单张精修页（专业编辑）

- 可编辑字段：姓名、主/副项、分数、排名、合格标记、年份等
- 照片上传/替换
- 照片裁切与缩放（拖动位置 + 缩放比例）
- 实时预览
- 清晰度选择：
  - 社交版：1080×1920
  - 高清：1440×2560
  - 超清：2160×3840
- 导出为 PNG 下载

**编辑作用范围**
- 默认仅影响海报渲染（不改学生数据库）
- 可选“同步回学生数据库”的保存按钮（需确认）

**图片调整规则**
- 头像圆形裁切（带金色圆环）
- 拖拽移动 + 统一缩放滑杆
- 裁切框比例固定（避免不同设备变形）

---

### 5.3 前台轻量版（仅社交清晰度）

- 前台提供“生成并下载社交版海报”
- 前台不提供字段编辑、不提供高分辨率导出

---

### 5.4 海报内容与样式规范

- Apple 极简风、品牌紫 #8a42c1
- 金牌圆环头像裁切
- 文字字号基本一致，不影响排版
- 由系统自动排版，按网页排版生成
- 导出方式为“网页截图式下载”
- 海报**无水印**

**固定版式区域（建议）**
- 顶部：品牌区（润德艺考 + 年份）
- 中部：主信息（姓名 + 专业方向 + 主项/副项）
- 下部：分数与排名区（主项/副项/综合）
- 底部：学校标识/宣言短句（可开关）

---

### 5.5 海报张数与生成规则（按分数类型）

- 1 张：主项分数海报
- 2 张：主项分数海报 + 副项分数海报
- 3 张：主项分数海报 + 副项分数海报 + 综合分海报
- 三张海报文案/字号保持一致，仅展示字段与标题随类型变化

**字段映射（建议）**
- 主项分数海报：姓名、主项、主项分数、主项排名、专业方向、年份
- 副项分数海报：姓名、副项、副项分数（若无则隐藏）、专业方向、年份
- 综合分海报：姓名、专业总分、专业排名、主项+副项组合展示、年份

---

### 5.6 生成与导出规则（截图式下载）

- 预览使用固定画布宽高（9:16）
- 导出时根据“清晰度”切换渲染像素密度
- 导出结果为 PNG 文件，文件名含学生姓名+类型+清晰度
- 生成过程不写入前台资源，仅在用户点击下载时生成

---

## 6. 数据筛选与报表（简化版）

- 目前不做平均分统计
- 预留筛选维度：届数、性别、生源地、原高中学校、专业（主/副项）
- 可导出 Excel（当前筛选结果）
- 可批量下载选中学生的海报 ZIP

---

## 7. 权限与角色（建议）

- 教务管理员：可上传截图、纠错、生成海报
- 运营管理员：可设置名人堂展示、导出海报
- 校长/负责人：只读查看与下载

---

## 8. 存储与目录建议（可调整）

- 原始截图：data/raw_ocr/
- 脱敏水印截图：public/ocr_masked/
- 海报成品：public/posters/
- 学生数据库：data/students_ocr.json
- 名人堂展示数据：data/hall_of_fame_students.json（由学生数据库同步生成）

---

## 9. 阶段路线（建议）

1) OCR 识别 + 学生数据库（教师式后台）
2) 海报工厂（批量审核 + 单张精修）
3) 前台轻量版海报下载
4) 报表导出与批量 ZIP

---

## 10. 待确认清单（下一步）

- 脱敏规则具体标准（姓名/证件号/考生号）
- 水印样式（固定文案/角度/透明度）
- 名人堂展示字段最小集合
- 海报三类文案模板（主项/副项/全能）
- 前台入口是否需要鉴权

---

> 本文作为第一版功能蓝图，后续可根据反馈补充细节与流程图。
